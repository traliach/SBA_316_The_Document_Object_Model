<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pizza Deal Finder</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"
    />
    <link
      rel="stylesheet"
      href="./styles/style.css"
    />
    <script defer src="./scripts/script.js"></script>
  </head>
  <body>
    <header>
      <nav id="top-menu" class="navbar has-shadow">
        <div class="navbar-brand">
          <a class="navbar-item" href="#">
            <strong>Pizza Deal Finder</strong>
          </a>
        </div>
      </nav>
    </header>
    <main>
      <section class="section">
        <div class="container">
          <h1 class="title is-4 mb-2">Pizza Deal Finder</h1>
          <p class="subtitle is-6">
            Use filters to find the best pizza deals in your town.
          </p>

          <div class="notification is-info is-light">
            Search, filter, sort, and save your favorite deals.
          </div>

          <form id="filtersForm" class="box mb-4">
            <div class="field">
              <label class="label" for="q">Search deals</label>
              <div class="control">
                <input
                  id="q"
                  name="q"
                  class="input"
                  type="search"
                  minlength="2"
                  placeholder="Try: slice, family, downtown..."
                />
              </div>
              <p id="qHelp" class="help is-danger is-hidden">
                Enter at least 2 characters.
              </p>
            </div>

            <div class="field">
              <label class="label" for="type">Type</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select id="type" name="type">
                    <option value="">All types</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="field">
              <label class="label" for="sort">Sort by</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select id="sort" name="sort">
                    <option value="">None</option>
                    <option value="priceAsc">Price: low to high</option>
                    <option value="priceDesc">Price: high to low</option>
                    <option value="ratingDesc">Rating: high to low</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="columns is-mobile">
              <div class="column">
                <div class="field">
                  <label class="label" for="minPrice">Min price</label>
                  <div class="control">
                    <input
                      id="minPrice"
                      name="minPrice"
                      class="input"
                      type="number"
                      min="0"
                      step="0.01"
                      placeholder="0.00"
                    />
                  </div>
                </div>
              </div>
              <div class="column">
                <div class="field">
                  <label class="label" for="maxPrice">Max price</label>
                  <div class="control">
                    <input
                      id="maxPrice"
                      name="maxPrice"
                      class="input"
                      type="number"
                      min="0"
                      step="0.01"
                      placeholder="25.00"
                    />
                  </div>
                </div>
              </div>
            </div>
            <p id="priceHelp" class="help is-danger is-hidden">
              Min price must be less than or equal to max price.
            </p>

            <div class="field is-grouped">
              <div class="control">
                <button id="searchBtn" class="button is-link" type="submit">
                  Search
                </button>
              </div>
              <div class="control">
                <button id="clearBtn" class="button is-light" type="button">
                  Clear
                </button>
              </div>
            </div>
          </form>

          <div id="dealsCount" class="has-text-grey mb-3"></div>
          <div id="emptyState" class="notification is-warning is-light is-hidden">
            No deals match your filters. Try clearing filters or widening the price range.
          </div>
          <div id="dealsGrid" class="columns is-multiline"></div>

          <section id="details" class="box mt-5">
            <h2 class="title is-5 mb-2">Deal details</h2>
            <p id="detailsEmpty" class="has-text-grey">
              Click a deal card to see details here.
            </p>
            <div id="detailsBody" class="is-hidden">
              <p class="mb-1"><strong id="detailsName"></strong></p>
              <p class="mb-1" id="detailsRestaurant"></p>
              <p class="mb-3" id="detailsMeta"></p>
              <a
                id="detailsLink"
                class="button is-small is-link"
                href="#"
                target="_blank"
                rel="noreferrer"
              >
                Open deal link
              </a>
            </div>
          </section>

          <template id="dealCardTpl">
            <div class="column is-4">
              <div class="card">
                <div class="card-content">
                  <div class="is-flex is-justify-content-space-between is-align-items-start">
                  <p class="title is-6" data-role="dealName"></p>
                    <button
                      class="button is-small is-light"
                      type="button"
                      data-action="favorite"
                      aria-pressed="false"
                      title="Toggle favorite"
                    >
                      â˜†
                    </button>
                  </div>
                  <p class="subtitle is-7 mb-2" data-role="restaurant"></p>
                  <p class="mb-3">
                    <span class="tag is-link is-light" data-role="type"></span>
                    <span class="tag is-dark is-light" data-role="price"></span>
                    <span class="tag is-warning is-light" data-role="rating"></span>
                  </p>
                  <a class="button is-small is-link is-light" data-role="link" target="_blank" rel="noreferrer">
                    View deal
                  </a>
                </div>
              </div>
            </div>
          </template>
        </div>
      </section>
    </main>
  </body>
</html>
